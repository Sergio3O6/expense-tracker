{% extends "base.html" %}
{% block content %}
<div class="container">
<h2>Delete Expenses</h2>
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="alert">
      {% for message in messages %}
        <p>{{ message }}</p>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}
<table border="1" cellpadding="5">
    <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Category</th>
        <th>Date</th>
        <th>Action</th>
    </tr>
    {% for expense in expenses %}
    <tr>
        <td>{{ expense['description'] }}</td>
        <td>${{ expense['amount']|round(2) }}</td>
        <td>{{ expense['category'] }}</td>
        <td>{{ expense['date'] }}</td>
        <td>
            <button class="delete" data-id="{{ expense[0] }}" onclick="confirmDelete(this)">‚ùå</button>
        </td>
    </tr>
    {% endfor %}
    <tr>
        <td><strong>Total</strong></td>
        <td><strong>${{ total|round(2) }}</strong></td>
        <td colspan="2"></td>
    </tr>

</table>
</div>
<script>
function confirmDelete(button) {
    let expenseId = button.getAttribute('data-id');
    let confirmed = confirm("Are you sure you want to delete this expense?");
    if (confirmed) {
        window.location.href = "/delete/" + expenseId;
    }
}

</script>
{% endblock %}
